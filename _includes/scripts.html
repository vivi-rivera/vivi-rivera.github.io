<script type="module" src="{{ '/assets/js/main.min.js' | relative_url }}"></script>

<script>
  // Preserve horizontal scroll position of the nav across page loads
  document.addEventListener('DOMContentLoaded', function () {
    var nav = document.querySelector('.greedy-nav .visible-links');
    if (!nav) return;

    // Unique key per site (domain)
    var storageKey = 'navScrollLeft:' + window.location.origin;

    // Restore previous scroll position (if any)
    try {
      var saved = sessionStorage.getItem(storageKey);
      if (saved !== null) {
        var value = parseInt(saved, 10);
        if (!isNaN(value)) {
          nav.scrollLeft = value;
        }
      }
    } catch (e) {
      // ignore sessionStorage errors
    }

    function storeScroll() {
      try {
        sessionStorage.setItem(storageKey, nav.scrollLeft);
      } catch (e) {
        // ignore
      }
    }

    // Save position whenever the page is about to go away
    window.addEventListener('pagehide', storeScroll);
    window.addEventListener('beforeunload', storeScroll);
  });
</script>

{% include analytics.html %}
