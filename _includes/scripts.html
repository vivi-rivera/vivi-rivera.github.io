<script type="module" src="{{ '/assets/js/main.min.js' | relative_url }}"></script>

<script>
  // Preserve horizontal scroll position of the nav across page loads
  document.addEventListener('DOMContentLoaded', function () {
    var nav = document.querySelector('.greedy-nav .visible-links');
    if (!nav) return;

    // Use a per-site key so Viviana's and Tom's don't conflict
    var originKey = 'navScrollLeft:' + window.location.origin;

    // 1. Restore previous scroll position (if any)
    var saved = sessionStorage.getItem(originKey);
    if (saved !== null) {
      var value = parseInt(saved, 10);
      if (!isNaN(value)) {
        nav.scrollLeft = value;
      }
    }

    // 2. On click of any nav link, save current scrollLeft
    nav.addEventListener('click', function (evt) {
      var link = evt.target.closest('a');
      if (link) {
        // Save current position so the next page can restore it
        sessionStorage.setItem(originKey, nav.scrollLeft);
      }
    }, true);
  });
</script>

{% include analytics.html %}
