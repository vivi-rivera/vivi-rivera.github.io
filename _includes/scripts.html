<script type="module" src="{{ '/assets/js/main.min.js' | relative_url }}"></script>

<script>
  (function () {
    // Save & restore horizontal scroll for the greedy-nav visible-links element
    var storageKey = 'navScrollLeft:' + window.location.origin;

    function restoreNavScroll() {
      var nav = document.querySelector('.greedy-nav .visible-links');
      if (!nav) return;

      try {
        var saved = sessionStorage.getItem(storageKey);
        if (saved !== null) {
          var value = parseInt(saved, 10);
          if (!isNaN(value)) {
            // Use a tiny delay to ensure layout has happened
            setTimeout(function () {
              nav.scrollLeft = value;
            }, 0);
          }
        }
      } catch (e) {
        // Ignore sessionStorage issues
      }

      // When leaving the page, remember where we were
      function storeScroll() {
        try {
          sessionStorage.setItem(storageKey, nav.scrollLeft);
        } catch (e) {}
      }

      window.addEventListener('beforeunload', storeScroll);
      window.addEventListener('pagehide', storeScroll);
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', restoreNavScroll);
    } else {
      restoreNavScroll();
    }
  })();
</script>

{% include analytics.html %}
